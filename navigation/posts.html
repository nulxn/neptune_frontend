---
layout: base
title: Posts
search_exclude: true
permalink: /posts/
---

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
<script>
  const socket = io.connect("http://127.0.0.1:8887");
  socket.on('connect', () => {
    console.log('Connected to the server');
  });

  socket.on('chat_message', (data) => {
    displayMessage(`${data.user}: ${data.text}`);
  });

  function sendMessage() {
    const username = document.getElementById('usernameInput').value;
    const message = document.getElementById('messageInput').value;

    if (username && message) {
      socket.emit('chat_message', { user: username, text: message });
      document.getElementById('messageInput').value = '';
    }
  }

  function displayMessage(message) {
    const messageList = document.getElementById('messages');
    const newMessage = document.createElement('li');
    newMessage.textContent = message;
    messageList.appendChild(newMessage);
  }
</script>

<div class="chatroom">
  <h2>Chat</h2>
  <input id="usernameInput" placeholder="Name" />
  <input id="messageInput" placeholder="Message" />
  <button onclick="sendMessage()">Send</button>
  <div id="messages"></div>
</div>

<style>
  .chatroom {
    width: 400px;
    margin: 20px auto;
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #f9f9f9;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .chatroom h2 {
    text-align: center;
    font-family: Arial, sans-serif;
    color: #333;
  }

  #usernameInput,
  #messageInput {
    width: calc(100% - 20px);
    padding: 10px;
    margin: 5px 0;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
  }

  button {
    width: 100%;
    padding: 10px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 16px;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  #messages {
    margin-top: 15px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #fff;
    max-height: 200px;
    overflow-y: auto;
  }

  #messages li {
    list-style-type: none;
    padding: 5px 0;
    border-bottom: 1px solid #f1f1f1;
    color: black;
  }

  #messages li:last-child {
    border-bottom: none;
  }
<<<<<<< HEAD

  .buttonyellow {
    background-color: yellow !important;
    color: white !important;
  }

  .buttonpurple {
    background-color: purple !important;
    color: white !important;
  }
</style>

<div class="chatroom">
  <!-- Chat Messages -->
  <div class="chat-container" id="chat-container">
    <div class="message left">Welcome to the chatroom!</div>

    <!-- Subject Buttons -->
    <div>
      <button class="buttonred" onClick="OpenChat('Maths','red')">Maths</button>
      <button class="buttongreen" onClick="OpenChat('Science','green')">
        Science
      </button>
      <button class="buttonblue" onClick="OpenChat('CS','blue')">
        Computer Science
      </button>
      <button class="buttonyellow" onClick="OpenChat('History','yellow')">
        History
      </button>
      <button class="buttonpurple" onClick="OpenChat('English','purple')">
        English
      </button>
    </div>

    <div class="message left" id="chatsubject">
      Click on any subject above to open subject chat!
    </div>
    <div
      id="chatbox1"
      style="
        display: none;
        padding: 10px;
        height: 300px;
        overflow-y: auto;
        background: #1a2830; /* Very light sea blue */
        border-bottom: 2px solid #0077be;
      "
    ></div>

    <div class="input-container" id="chatinput">
      <input
        type="text"
        id="message-input"
        placeholder="Type your message here..."
      />
      <button id="send-button">Send</button>
    </div>
  </div>

  <!-- Poseidon Homework Bot Floating Button -->
  <div
    id="ai-bot-button"
    style="
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #0056b3; /* Deeper ocean blue */
      color: white;
      padding: 15px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      font-size: 20px;
      text-align: center;
    "
  >
    ðŸ”±
    <!-- Trident Icon -->
  </div>

  <!-- Poseidon Homework Bot Popup Modal -->
  <div
    id="ai-bot-popup"
    style="
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 320px;
      background-color: #f0faff; /* Light background */
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      overflow: hidden;
      font-family: Arial, sans-serif;
    "
  >
    <div
      style="
        background-color: #0077be; /* Ocean blue */
        color: white;
        padding: 10px;
        font-size: 18px;
        text-align: center;
      "
    >
      Poseidon Homework Bot
      <span id="close-bot" style="float: right; cursor: pointer">&times;</span>
    </div>
    <div
      id="chat-box"
      style="
        padding: 10px;
        height: 300px;
        overflow-y: auto;
        background-color: #e0f7ff; /* Very light sea blue */
        border-bottom: 2px solid #0077be;
      "
    ></div>
    <div
      style="
        display: flex;
        flex-direction: column;
        padding: 10px;
        gap: 10px;
        background-color: #0077be;
      "
    >
      <input
        type="text"
        id="question"
        placeholder="Type your question here"
        style="
          width: 100%;
          padding: 10px;
          border: none;
          border-radius: 5px;
          background-color: white; /* Light box background */
          color: #0056b3; /* Deep blue text */
        "
      />
      <button
        onclick="sendQuestion()"
        style="
          width: 100%;
          padding: 10px;
          background-color: #0056b3; /* Darker blue for the button */
          color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-weight: bold;
        "
      >
        Ask Poseidon
      </button>
    </div>
  </div>
</div>

<!-- JavaScript for Chat -->
<script>
  var pythonURI;
  if (location.hostname === "localhost") {
    pythonURI = "http://localhost:8887";
  } else if (location.hostname === "127.0.0.1") {
    pythonURI = "http://127.0.0.1:8887";
  } else {
    pythonURI = "https://flocker.nighthawkcodingsociety.com";
  }

  const fetchOptions = {
    method: "GET",
    mode: "cors",
    cache: "default",
    credentials: "include",
    headers: {
      "Content-Type": "application/json",
      "X-Origin": "client",
    },
  };

  // Toggle Popup
  const botButton = document.getElementById("ai-bot-button");
  const botPopup = document.getElementById("ai-bot-popup");
  const closeBot = document.getElementById("close-bot");

  botButton.addEventListener("click", () => {
    botPopup.style.display = "block";
  });

  closeBot.addEventListener("click", () => {
    botPopup.style.display = "none";
  });

  //  galaxy bg color, hide and show subject chat based on button click

  async function OpenChat(subject, bcolor) {
    const chatBox = document.getElementById("chatbox1");
    chatBox.style.display = "block";
    //chatBox.style.backgroundColor = bcolor;
    const chatinput = document.getElementById("chatinput");
    chatinput.style.display = "block";
    const chatsubject = document.getElementById("chatsubject");
    chatsubject.textContent = subject;
    chatsubject.style.backgroundColor = bcolor;
  }

  async function sendQuestion() {
    const question = document.getElementById("question").value;
    const chatBox = document.getElementById("chat-box");

    chatBox.innerHTML += `
        <div style="margin-bottom: 10px; background: #e8f4ff; padding: 10px; border-radius: 8px;">
            <strong style="color: #0056b3;">You:</strong> 
            <span style="color: #0056b3;">${question}</span>
        </div>`;

    const response = await fetch(`${pythonURI}/api/ai/help`, {
      ...fetchOptions,
      method: "POST",
      body: JSON.stringify({ question }),
    });

    const data = await response.json();
    const aiResponse = data.response || "Error: Unable to fetch response.";

    chatBox.innerHTML += `
        <div style="margin-bottom: 10px; background: #0077be; padding: 10px; border-radius: 8px; color: white;">
            <strong>Poseidon:</strong>
            ${aiResponse}
        </div>`;
  }
</script>
{% endraw %}
=======
</style>
>>>>>>> 57a9fea (chatroom frontend)
